<%- include ("../partials/header")%>
<div class="all-content">
  <section id="new">
    <div class="container">
      <div class="form-container">
        <h5 class="lone-center-align">Add New Record</h5>
        <form action="/user/dashboard/new" method="POST">
          <div class="form-group">
            <label for="weight">Weight</label>
            <input
              type="Number"
              step="0.01"
              class="form-control"
              id="weight"
              name="weight"
              required
              placeholder="Enter Weight"
            />
          </div>
          <div class="form-group">
            <label for="bmi">Body Mass Index</label>
            <input type="Number" step="0.01" class="form-control" id="bmi"
            name="bmi" placeholder="Enter BMI" required value= />
          </div>

          <div class="form-group">
            <label for="date">Date</label>
            <input
              type="Date"
              name="date"
              class="form-control"
              id="date"
              aria-describedby="emailHelp"
              placeholder="Enter Date"
              required
            />
          </div>
          <div class="form-group">
            <label for="time">Time</label>
            <input
              type="Time"
              class="form-control"
              id="time"
              name="time"
              placeholder="Enter Time"
              required
            />
          </div>

          <button type="submit" class="lone-center-align btn btn-primary">
            Submit
          </button>
        </form>
        <div class="index-addendum">
          <p><a href="/user/dashboard">Back to Dashboard</a></p>
        </div>
      </div>
    </div>
  </section>
</div>

<script>
  //gets and parses the array and stores the value into a variable
  let currentBMI = JSON.parse(localStorage.getItem("bmiArray"));
  //Gets the most recent value (last element) of the array
  let realBMI = currentBMI[currentBMI.length - 1];
  //injects this value into the DOM
  document.getElementById("bmi").value = realBMI;

  //moment js for date
  document.getElementById("date").value = moment().format("YYYY-MM-DD");
  //moment js for time
  document.getElementById("time").value = moment().format("HH:mm");
</script>

<%- include ("../partials/footer")%>
